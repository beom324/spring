<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>
<body>
	
	<div id="bookForm">
		도서명 : <input type="text" v-model="b.bookname"/><br />
		가격 : <input type="text" v-model="b.price"/><br />
		출판사 : <input type="text" v-model="b.publisher"/><br />
		<button v-on:click="insertBook">등록</button>	
		<button v-on:click="updateBook">수정</button>	
		<button v-on:click="deleteBook">삭제</button>	
	</div>
	<hr />
	<table id="book">		
		<thead>
			<tr>
				<th>도서번호</th>
				<th>도서명</th>
				<th>가격</th>
				<th>출판사</th>
			</tr>
		</thead>
		<tbody>
			<tr v-for="b in list">
				<td>{{b.bookid}}</td>
				<td>{{b.bookname}}</td>
				<td>{{b.price}}</td>
				<td>{{b.publisher}}</td>
			</tr>
		</tbody>
	</table>
		
	<script>
		const axiosConfig = {
                headers:{
                    "Content-Type":"application/x-www-form-urlencoded"
                }
        }
        
		var bookForm = new Vue({
			el:"#bookForm",
			data:{
				b:{
					bookname:"",
					price:0,
					publisher:""
				}
			},
			methods:{
				insertBook:function(){
					axios.post("/insertBook",this.b,axiosConfig).then(function(){
						location.reload();
					});
				},
				updateBook:function(){},
				deleteBook:function(){}
			}
		});
		
		axios.get("/listBook").then(function(res){
			var book = new Vue({
				el:"#book",
				data:{
					list:res.data
				}
			});
		});
	</script>
</body>
</html>





